require 'rake/clean'

100.times do |num|
  taskname = "task_#{num}"
  task taskname do |t|
    sh "MYNUM=#{num}; export MYNUM; sleep 0.#{num} ; echo ruby-num was #{num} env-num was $MYNUM >> x.tmp"
  end
  task :default => taskname
end

CLEAN.add("x.tmp")
